/* ========================================================== 
 * 
 * bootstrap-maxlength.js v 1.6.0 
 * Copyright 2015 Maurizio Napoleoni @mimonap
 * Licensed under MIT License
 * URL: https://github.com/mimo84/bootstrap-maxlength/blob/master/LICENSE
 *
 * ========================================================== */

!function(a){"use strict";a.event.special.destroyed||(a.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}),a.fn.extend({lengthDetector:function(b,c){function d(b){var c;return a.configs?"undefined"===a.type(b)?c=a.configs.defaults:"string"===a.type(b)&&(c=a.configs[b]):a.error("jQuery.configs rules are not loaded, plz add configuration files to the page"),c}function e(b){var c=b.data();if("undefined"!==a.type(b.data("interval-1"))){for(var d=1,e={};10>d&&"undefined"!==a.type(b.data("interval-"+d));){var f=b.data("interval-"+d).split(" ");e[d-1]={},e[d-1].limitChars=f[0],e[d-1].bsClass=f[1],f.shift(),f.shift(),e[d-1].message=f.join(" "),d++}c=a.extend(b.data(),e)}return c}function f(a){var c=a.val();c=b.twoCharLinebreak?c.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):c.replace(new RegExp("\r?\n","g"),"\n");var d=0;return d=b.utf8?h(c):c.length}function g(a,c){var d=a.val(),e=0;b.twoCharLinebreak&&(d=d.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"),"\n"===d.substr(d.length-1)&&d.length%2===1&&(e=1)),a.val(d.substr(0,c-e))}function h(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:b+=d>127&&2048>d?2:3}return b}function i(a,c,d){var e=!0;return!b.alwaysShow&&d-f(a)>c&&(e=!1),e}function j(a,b){var c=b-f(a);return c}function k(b,c){var d;if("object"===a.type(b)){var e=a.extend(c.attr("style"),b);c.css(e),d="label"}else c.removeAttr("style").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}),-1!==b.search(/^#/)?(c.css("background-color",b),d="label"):(c.css("background-color",""),d="label label-"+b);return d}function l(a,b){b.css({display:"block"}),a.trigger("maxLength.shown")}function m(a,b){b.css({display:"none"}),a.trigger("maxlength.hidden")}function n(a,c,d,e){var f="";return b.message?f="function"==typeof b.message?b.message(a,c):b.message.replace("%charsTyped%",d).replace("%charsRemaining%",c-d).replace("%charsTotal%",c):(b.preText&&(f+=b.preText),f+=b.showCharsTyped?d:c-d,b.showMaxLength&&(f+=b.separator+c),b.postText&&(f+=b.postText)),q(e)&&(f+=". "+e),f}function o(b,c){var d,e=[],f=0,g=!1;return a.each(b,function(a,b){return g&&c<=b.limitChars?(d=b.limitChars,e=b,!1):(e="undefined",void(c>b.limitChars&&(f=b.limitChars,g=!0)))}),0===f&&a.each(b,function(a,b){return d=b.limitChars,e=b,!1}),e}function p(a){for(var b=Object.keys(a).length,c=b-1;c>0;c--)for(var d=0;c>d;d++)if(a[d].limitChars>a[d+1].limitChars){var e={};e=a[d],a[d]=a[d+1],a[d+1]=e}return a}function q(b){return""===a.trim(b)?!1:!0}function r(a,c,d,e){if(e){var g=b.interval,h=f(c),j=o(g,h);if(e.html(n(c.val(),d,d-a,j.message)),a>0)if("undefined"===j)if(i(c,b.threshold,d)){var p=k(b.defaultClass,e);l(c,e.removeClass(b.previousClass).addClass(p)),b.previousClass=p}else m(c,e);else if(i(c,b.threshold,d)){var p=k(j.bsClass,e);l(c,e.removeClass(b.previousClass).addClass(p)),b.previousClass=p}else m(c,e);else{var p=k(b.limitReachedClass,e);l(c,e.removeClass(b.previousClass).addClass(p)),b.previousClass=p}}b.allowOverMax&&(0>a?c.addClass("overmax"):c.removeClass("overmax"))}function s(b){var c=b[0];return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():{width:c.offsetWidth,height:c.offsetHeight},b.offset())}function t(c,d){var e=s(c);if("function"===a.type(b.placement))return void b.placement(c,d,e);if(a.isPlainObject(b.placement))return void u(b.placement,d);var f=c.outerWidth(),g=d.outerWidth(),h=d.width(),i=d.height();switch(b.appendToParent&&(e.top-=c.parent().offset().top,e.left-=c.parent().offset().left),b.placement){case"bottom":d.css({top:e.top+e.height,left:e.left+e.width/2-h/2});break;case"top":d.css({top:e.top-i,left:e.left+e.width/2-h/2});break;case"left":d.css({top:e.top+e.height/2-i/2,left:e.left-h});break;case"right":d.css({top:e.top+e.height/2-i/2,left:e.left+e.width});break;case"bottom-right":d.css({top:e.top+e.height,left:e.left+e.width});break;case"top-right":d.css({top:e.top-i,left:e.left+f});break;case"top-left":d.css({top:e.top-i,left:e.left-g});break;case"bottom-left":d.css({top:e.top+c.outerHeight(),left:e.left-g});break;case"centered-right":d.css({top:e.top+i/2,left:e.left+f-g-3});break;case"bottom-right-inside":d.css({top:e.top+e.height,left:e.left+e.width-g});break;case"top-right-inside":d.css({top:e.top-i,left:e.left+f-g});break;case"top-left-inside":d.css({top:e.top-i,left:e.left});break;case"bottom-left-inside":d.css({top:e.top+c.outerHeight(),left:e.left})}}function u(c,d){if(c&&d){var e=["top","bottom","left","right","position"],f={};a.each(e,function(a,c){var d=b.placement[c];"undefined"!=typeof d&&(f[c]=d)}),d.css(f)}}function v(a){var c="maxlength";return b.allowOverMax&&(c="data-bs-mxl"),a.attr(c)||a.attr("size")}var w=a("body");a.isFunction(b)&&!c&&(c=b,b={});var x=b;return this.each(function(){function c(){var c=d(i.data("length-detector-class")),g=e(i);b=a.extend({},b,c,g),b=a.extend({},b,x);var k=n(i.val(),f,"0","");f=v(i),p(b.interval),h||(h=a('<span class="length-detector"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(k)),i.is("textarea")&&(i.data("maxlenghtsizex",i.outerWidth()),i.data("maxlenghtsizey",i.outerHeight()),i.mouseup(function(){(i.outerWidth()!==i.data("maxlenghtsizex")||i.outerHeight()!==i.data("maxlenghtsizey"))&&t(i,h),i.data("maxlenghtsizex",i.outerWidth()),i.data("maxlenghtsizey",i.outerHeight())})),b.appendToParent?(i.parent().append(h),i.parent().css("position","relative")):w.append(h);var l=j(i,v(i));r(l,i,f,h),t(i,h)}var f,h,i=a(this);a(window).resize(function(){h&&t(i,h)}),b.allowOverMax&&(a(this).attr("data-bs-mxl",a(this).attr("maxlength")),a(this).removeAttr("maxlength")),b.showOnReady?i.ready(function(){c()}):i.focus(function(){c()}),i.on("maxLength.reposition",function(){t(i,h)}),i.on("destroyed",function(){h&&h.remove()}),i.on("blur",function(){h&&!b.showOnReady&&h.remove()}),i.on("input",function(){var a=v(i),c=j(i,a),d=!0;return b.validate&&0>c?(g(i,a),d=!1):r(c,i,f,h),t(i,h),d})})}})}(jQuery);